<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Settings | Budgeting Buddy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/dataManager.js"></script>
    <script src="../js/navbar.js"></script>
    <script defer src="../js/settings.js"></script>
</head>

<body class="min-h-screen bg-gray-50">

    <!-- Navbar -->
    <div id="navbar"></div>

    <div class="container mx-auto px-4 py-4">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">Settings</h1>
        <p class="text-gray-600 mb-8">Customize your budgeting experience</p>

        <div class="grid lg:grid-cols-2 gap-8">
            <!-- Currency Settings -->
            <div class="bg-white rounded-xl shadow p-6">
                <h2 class="text-xl font-semibold mb-2">Currency Preference</h2>
                <p class="text-gray-600 mb-4">Choose your preferred currency for all transactions</p>
                <label for="currency" class="block font-medium mb-1">Default Currency</label>
                <select id="currency" class="w-full border px-3 py-2 rounded mb-4">
                    <option value="USD">$ US Dollar</option>
                    <option value="EUR">€ Euro</option>
                    <option value="GBP">£ British Pound</option>
                    <option value="CAD">C$ Canadian Dollar</option>
                    <option value="AUD">A$ Australian Dollar</option>
                    <option value="JPY">¥ Japanese Yen</option>
                    <option value="PHP">₱ Philippine Peso</option>
                    <option value="SGD">S$ Singapore Dollar</option>
                    <option value="CNY">¥ Chinese Yuan</option>
                    <option value="KRW">₩ South Korean Won</option>
                    <option value="INR">₹ Indian Rupee</option>
                </select>
                <div class="p-4 bg-blue-50 rounded">
                    <p class="text-sm text-blue-700">
                        <strong>Current Currency:</strong>
                        <span id="current-currency">US Dollar (USD)</span>
                    </p>
                    <p class="text-xs text-blue-600 mt-1">
                        This will be applied to all new transactions and display formats.
                    </p>
                </div>
            </div>

            <!-- Category Management -->
            <div class="bg-white rounded-xl shadow p-6">
                <h2 class="text-xl font-semibold mb-2">Expense Categories</h2>
                <p class="text-gray-600 mb-4">Manage your spending categories</p>
                <form id="category-form" class="flex gap-2 mb-6">
                    <input type="text" id="newCategory" placeholder="e.g. Hobbies"
                        class="flex-1 border px-3 py-2 rounded" />
                    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        Add
                    </button>
                </form>
                <div>
                    <h3 class="font-semibold text-gray-900 mb-2">Current Categories</h3>
                    <div id="category-list" class="space-y-2 max-h-60 overflow-y-auto"></div>
                </div>
            </div>
        </div>

        <!-- Account Settings -->
        <div class="bg-white rounded-xl shadow p-6 mt-8">
            <h2 class="text-xl font-semibold mb-2">Account Settings</h2>
            <p class="text-gray-600 mb-6">Manage your account preferences and data</p>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold mb-4">Profile Settings</h3>
                    <label for="displayName" class="block font-medium mb-1">Display Name</label>
                    <input id="displayName" type="text" class="w-full border px-3 py-2 rounded mb-4" />
                    <label for="email" class="block font-medium mb-1">Email Address</label>
                    <input id="email" type="email" class="w-full border px-3 py-2 rounded mb-4" />
                    <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full md:w-auto">
                        Update Profile
                    </button>
                </div>

                <div>
                    <h3 class="font-semibold mb-4">Data Management</h3>
                    <button class="w-full border px-4 py-2 rounded mb-2">Export Data</button>
                    <button class="w-full border px-4 py-2 rounded mb-2">Import Data</button>
                    <button class="w-full border border-red-500 text-red-600 px-4 py-2 rounded hover:bg-red-50">
                        Clear All Data
                    </button>
                    <p class="text-xs text-gray-500 mt-2">
                        Export your data for backup or import data from other budgeting apps.
                    </p>
                </div>

                <div>
                    <h3 class="font-semibold mb-4">Change Password</h3>
                    <form id="change-password-form" class="space-y-3">
                        <label for="currentPassword" class="block font-medium mb-1">Current Password</label>
                        <div class="relative mb-2">
                            <input id="currentPassword" type="password" class="w-full border px-3 py-2 rounded pr-10"
                                required />
                            <button type="button" tabindex="-1"
                                class="show-password absolute right-2 top-1/2 -translate-y-1/2 text-gray-500"
                                data-target="currentPassword">Show</button>
                        </div>
                        <label for="newPassword" class="block font-medium mb-1">New Password</label>
                        <div class="relative mb-2">
                            <input id="newPassword" type="password" class="w-full border px-3 py-2 rounded pr-10"
                                required minlength="6" />
                            <button type="button" tabindex="-1"
                                class="show-password absolute right-2 top-1/2 -translate-y-1/2 text-gray-500"
                                data-target="newPassword">Show</button>
                        </div>
                        <label for="confirmNewPassword" class="block font-medium mb-1">Confirm New Password</label>
                        <div class="relative mb-4">
                            <input id="confirmNewPassword" type="password" class="w-full border px-3 py-2 rounded pr-10"
                                required minlength="6" />
                            <button type="button" tabindex="-1"
                                class="show-password absolute right-2 top-1/2 -translate-y-1/2 text-gray-500"
                                data-target="confirmNewPassword">Show</button>
                        </div>
                        <button type="submit"
                            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profile-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-lg p-8 w-full max-w-md relative">
            <button id="close-profile-modal"
                class="absolute top-2 right-2 text-gray-400 hover:text-gray-700">&times;</button>
            <h2 class="text-2xl font-bold mb-4">Profile Information</h2>
            <div class="mb-4">
                <label class="block text-gray-700 font-medium mb-1">Name</label>
                <div id="profile-name" class="p-2 bg-gray-100 rounded"></div>
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 font-medium mb-1">Email</label>
                <div id="profile-email" class="p-2 bg-gray-100 rounded"></div>
            </div>
        </div>
    </div>
    <script>
        // Profile modal logic
        const userInfoSection = document.getElementById('user-info');
        if (userInfoSection) {
            userInfoSection.style.cursor = 'pointer';
            userInfoSection.addEventListener('click', () => {
                const modal = document.getElementById('profile-modal');
                const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                document.getElementById('profile-name').textContent = userData.name || '';
                document.getElementById('profile-email').textContent = userData.email || '';
                modal.classList.remove('hidden');
            });
        }
        document.getElementById('close-profile-modal').onclick = () => {
            document.getElementById('profile-modal').classList.add('hidden');
        };
    </script>
</body>

</html>